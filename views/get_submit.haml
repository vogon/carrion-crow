
%input{:id => 'remaining', :type => 'hidden', :value => @characters_left}

%script{:type => "text/javascript",
        :src  => "jquery-1.7.2.min.js"}

%form(action='/submit' method='POST')
    %p
        = "Current word is: #{@last_word}"
    %p
        #characters_left
    %p
        The next word is
    %p
        %input(type='text' id='entry' name='word')
    %p
        %input.disabled(type='submit' id='submit')

:javascript
    function calculate_remaining() {
        var remaining = $('#remaining').val() - $('#entry').val().length;
        $('#characters_left').text(remaining + " characters left!");
    };

    function disable_submit() {
        $('#submit').addClass('disabled');
    };

    function enable_submit() {
        $('#submit').removeClass('disabled');
    };

    $('#entry').keypress(function() {
        if($('#entry').val().match(/\s/)) {
            disable_submit();
        } else {
            enable_submit();
        }
    });

    $('#entry').keypress(function() {
        calculate_remaining();
    });

    $(document).ready(function() {
        calculate_remaining();
    });